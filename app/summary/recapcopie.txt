const onFinal = useCallback(async () => {
        // Récupérer l'ID de l'utilisateur actuel et l'ID du listing depuis le sessionStorage
        const userId = currentUser?.id;
        const listingId = sessionStorage.getItem('listingId');

        // Envoyer une requête POST à votre backend pour enregistrer le paiement
        try {
            await axios.post('/api/payments', {
                userId,
                listingId,
                totalPrice
            });
            router.push(`/success`);
        } catch (error) {
            console.error("Erreur lors de l'enregistrement du paiement :", error);
            toast.error('Quelque chose s`est mal passé');
        }
    }, [currentUser, totalPrice, router]);
    
    return (
        <Container>
            {/* Autres parties de votre code */}
            <PayPalButton totalPrice={totalPrice} onSuccess={onFinal} />
        </Container>
    );